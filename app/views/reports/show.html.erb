<div class="p-6 space-y-6">

  <%= link_to "Home Administrador", adm_home_path,
      class: "inline-block px-3 py-1 border border-indigo-500 rounded-md text-indigo-700 hover:bg-indigo-50" %>

  <h1 class="text-2xl font-bold mt-4">Relatório</h1>

  <div class="space-y-1 text-gray-700">
    <p><strong>Período:</strong> <%= @report.semester %>º semestre de <%= @report.year %></p>
    
    <p class="font-semibold mt-3">Prazos de entrega:</p>
    <p>Estudante: <%= @report.due_date_student&.strftime("%d de %B, %Y") %></p>
    <p>Professor: <%= @report.due_date_professor&.strftime("%d de %B, %Y") %></p>
    <p>Coordenação: <%= @report.due_date_administrator&.strftime("%d de %B, %Y") %></p>
  </div>

  <hr>

  <!-- Parecer em massa (ainda futuro) -->
  <div class="p-4 border rounded-md bg-gray-50">
    <p class="text-lg font-bold mb-2">Realizar parecer em massa</p>
    <%= link_to "Confirmar todos marcados como 'Aprovado'",
        "#",
        class: "px-3 py-2 border border-green-600 text-green-600 rounded-md cursor-not-allowed opacity-50",
        title: "Funcionalidade futura"
    %>
  </div>

  <!-- Alunos que precisam avaliar -->
  <div class="space-y-3">
    <h2 class="text-xl font-bold text-indigo-700">
      Alunos que precisam avaliar (<%= @reports_to_review&.count || 0 %>/<%= @reports_done&.count || 0 %>)
    </h2>

    <div class="space-y-3 border rounded-md p-4">
      <% if @reports_to_review.present? %>
        <%= render partial: "/administrators/detailed_info/reports_info",
                   collection: @reports_to_review,
                   as: :report %>
      <% else %>
        <p class="text-gray-500 italic">Nenhuma resposta ainda.</p>
      <% end %>
    </div>
  </div>

  <!-- Avaliação do professor pendente -->
  <div class="space-y-3">
    <h2 class="text-xl font-bold text-yellow-700">
      Avaliação do professor pendente (<%= @reports_in_progress&.count || 0 %>/<%= @report.report_infos&.count %>)
    </h2>

    <div class="space-y-3 border rounded-md p-4">
      <% if @reports_in_progress.present? %>
        <%= render partial: "/administrators/detailed_info/reports_info",
                   collection: @reports_in_progress,
                   as: :report %>
      <% else %>
        <p class="text-gray-500 italic">Nenhuma pendência :)</p>
      <% end %>
    </div>
  </div>

  <!-- Alunos que ainda não responderam -->
  <div class="space-y-3">
    <h2 class="text-xl font-bold text-red-700">
      Alunos que ainda não responderam (<%= @reports_pending.count %>)
    </h2>

    <div class="space-y-3 border rounded-md p-4">
      <% if @reports_pending.any? %>
        <%= render partial: "/administrators/detailed_info/reports_info",
                   collection: @reports_pending,
                   as: :report %>
      <% else %>
        <p class="text-gray-500 italic">Todos já responderam :)</p>
      <% end %>
    </div>
  </div>

</div>
